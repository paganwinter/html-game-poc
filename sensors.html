<html>
<head></head>
<body>

<textarea id="motion" cols="50" rows="30"></textarea>
<textarea id="orientation" cols="50" rows="30"></textarea>


<script>
/*
let acl = new Accelerometer({frequency: 60});
acl.addEventListener('reading', () => {
  console.log("Acceleration along the X-axis " + acl.x);
  console.log("Acceleration along the Y-axis " + acl.y);
  console.log("Acceleration along the Z-axis " + acl.z);
  document.getElementById('console').value += JSON.stringify(acl)
});
acl.start();
*/

function fmt(num, prec = 2) {
  if (num) return num.toFixed(prec)
  return num
}
function handleMotion(ev) {
  // let { accelerationIncludingGravity, acceleration, interval, rotationRate } = ev
  let {
    accelerationIncludingGravity: {
      x: acclGrvX,
      y: acclGrvY,
      z: acclGrvZ,
    },
    acceleration: {
      x: acclX,
      y: acclY,
      z: acclZ,
    },
    interval,
    rotationRate: {
      alpha,
      beta,
      gamma,
    },
  } = ev

  let val = {
    acclerationIncGrav: {
      x: fmt(acclGrvX),
      y: fmt(acclGrvY),
      z: fmt(acclGrvZ),
    },
    accleration: {
      x: fmt(acclX),
      y: fmt(acclY),
      z: fmt(acclZ),
    },
    rotationRate: {
      alpha: fmt(alpha),
      beta: fmt(beta),
      gamma: fmt(gamma),
    },
    interval,
  }
  val = JSON.stringify(val, 0, 2)
  document.getElementById('motion').value = val
}
function handleOrientation(ev) {
  let { alpha, beta, gamma } = ev
  // let val = JSON.stringify({ alpha, beta, gamma })

  let val = {
    alpha: fmt(alpha),
    beta: fmt(beta),
    gamma: fmt(gamma),
  }
  val = JSON.stringify(val, 0, 2)
  document.getElementById('orientation').value = val
}
window.addEventListener('devicemotion', handleMotion);
window.addEventListener('deviceorientation', handleOrientation);

</script>
</body>
</html>
